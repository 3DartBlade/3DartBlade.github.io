function search_main(){$("#search_pan").hide(),$("#search").toggle(vids.length>0),$("#search-done").click(()=>$("#search_pan").hide()),$("#search").click(()=>{const e=elasticlunr(function(){this.addField("title"),this.setRef("id")});items=[],vids.forEach((e,t)=>items.push({id:t+1,title:e.title.substring(0,60)})),items.forEach(t=>e.addDoc(t)),$("#search_pan").show(),$("#search-results").hide(),$("#count").html(""),$("#search-input").keyup(function(){const t=$("#search-input").val();if($("#count").html(""),$("#search-results").empty(),t.length<3)return $("#search-results").hide();const s=e.search(t,{bool:"AND",expand:!0})||[];$("#count").html(""+s.length);for(const e of s.sort((e,t)=>e.ref-t.ref)){const t=pad(e.ref)+" ~~~ "+e.doc.title;$("#search-results").append(new Option(t,e.ref))}const c=Math.min(10,s.length);$("#search-results").attr("size",c),$("#search-results").toggle(c>0)}),document.getElementById("search-input").addEventListener("search",function(e){$("#search-results").hide()}),$("#search-results").on("click",function(){playVideo($(this).val()-1)})})}